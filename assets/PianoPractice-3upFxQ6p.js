import{g as $,c as D,R as T,f as Zt,r as K,j as S}from"./index-DbG7sqSy.js";import{P as l}from"./index-BFNvxJy4.js";function Qt(t){const e=new(window.AudioContext||window.webkitAudioContext),r=e.createOscillator();r.type="sine",r.frequency.setValueAtTime(t,e.currentTime),r.connect(e.destination),r.start(),r.stop(e.currentTime+.5)}const te={C4:261.63,C4_sharp:277.18,D4:293.66,D4_sharp:311.13,E4:329.63,F4:349.23,F4_sharp:369.99,G4:392,G4_sharp:415.3,A4:440,A4_sharp:466.16,B4:493.88};var ee=ne;function ne(t,e,r){if(t!=null&&typeof t!="number")throw new Error("start must be a number or null");if(e!=null&&typeof e!="number")throw new Error("stop must be a number or null");if(r!=null&&typeof r!="number")throw new Error("step must be a number or null");e==null&&(e=t||0,t=0),r==null&&(r=e>t?1:-1);for(var n=[],o=t<e;o?t<e:t>e;t+=r)n.push(t);return n}const nt=$(ee);var Pt={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var i="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(i=o(i,n(a)))}return i}function n(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return r.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var a in i)e.call(i,a)&&i[a]&&(s=o(s,a));return s}function o(i,s){return s?i?i+" "+s:i+s:i}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(Pt);var re=Pt.exports;const rt=$(re);var oe=200,ot="__lodash_hash_undefined__",ie=9007199254740991,ae="[object Arguments]",se="[object Function]",ue="[object GeneratorFunction]",ce=/[\\^$.*+?()[\]{}|]/g,le=/^\[object .+?Constructor\]$/,fe=typeof D=="object"&&D&&D.Object===Object&&D,de=typeof self=="object"&&self&&self.Object===Object&&self,it=fe||de||Function("return this")();function pe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function he(t,e){var r=t?t.length:0;return!!r&&me(t,e,0)>-1}function ve(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function ye(t,e,r,n){for(var o=t.length,i=r+-1;++i<o;)if(e(t[i],i,t))return i;return-1}function me(t,e,r){if(e!==e)return ye(t,be,r);for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}function be(t){return t!==t}function ge(t,e){return t.has(e)}function Ne(t,e){return t==null?void 0:t[e]}function _e(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var we=Array.prototype,Ae=Function.prototype,at=Object.prototype,z=it["__core-js_shared__"],ht=function(){var t=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Et=Ae.toString,U=at.hasOwnProperty,Rt=at.toString,Se=RegExp("^"+Et.call(U).replace(ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=it.Symbol,Te=at.propertyIsEnumerable,Pe=we.splice,yt=vt?vt.isConcatSpreadable:void 0,mt=Math.max,Ee=It(it,"Map"),C=It(Object,"create");function I(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Re(){this.__data__=C?C(null):{}}function Ie(t){return this.has(t)&&delete this.__data__[t]}function Me(t){var e=this.__data__;if(C){var r=e[t];return r===ot?void 0:r}return U.call(e,t)?e[t]:void 0}function xe(t){var e=this.__data__;return C?e[t]!==void 0:U.call(e,t)}function Oe(t,e){var r=this.__data__;return r[t]=C&&e===void 0?ot:e,this}I.prototype.clear=Re;I.prototype.delete=Ie;I.prototype.get=Me;I.prototype.has=xe;I.prototype.set=Oe;function j(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function je(){this.__data__=[]}function ke(t){var e=this.__data__,r=B(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Pe.call(e,r,1),!0}function Ce(t){var e=this.__data__,r=B(e,t);return r<0?void 0:e[r][1]}function De(t){return B(this.__data__,t)>-1}function qe(t,e){var r=this.__data__,n=B(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}j.prototype.clear=je;j.prototype.delete=ke;j.prototype.get=Ce;j.prototype.has=De;j.prototype.set=qe;function k(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ke(){this.__data__={hash:new I,map:new(Ee||j),string:new I}}function Le(t){return W(this,t).delete(t)}function Fe(t){return W(this,t).get(t)}function $e(t){return W(this,t).has(t)}function Ue(t,e){return W(this,t).set(t,e),this}k.prototype.clear=Ke;k.prototype.delete=Le;k.prototype.get=Fe;k.prototype.has=$e;k.prototype.set=Ue;function L(t){var e=-1,r=t?t.length:0;for(this.__data__=new k;++e<r;)this.add(t[e])}function Be(t){return this.__data__.set(t,ot),this}function We(t){return this.__data__.has(t)}L.prototype.add=L.prototype.push=Be;L.prototype.has=We;function B(t,e){for(var r=t.length;r--;)if(tn(t[r][0],e))return r;return-1}function Ge(t,e,r,n){var o=-1,i=he,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;e.length>=oe&&(i=ge,s=!1,e=new L(e));t:for(;++o<a;){var d=t[o],p=d;if(d=d!==0?d:0,s&&p===p){for(var f=c;f--;)if(e[f]===p)continue t;u.push(d)}else i(e,p,n)||u.push(d)}return u}function Ve(t,e,r,n,o){var i=-1,s=t.length;for(r||(r=Xe),o||(o=[]);++i<s;){var a=t[i];r(a)&&ve(o,a)}return o}function He(t){if(!xt(t)||Ye(t))return!1;var e=Mt(t)||_e(t)?Se:le;return e.test(Ze(t))}function Je(t,e){return e=mt(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=mt(r.length-e,0),i=Array(o);++n<o;)i[n]=r[e+n];n=-1;for(var s=Array(e+1);++n<e;)s[n]=r[n];return s[e]=i,pe(t,this,s)}}function W(t,e){var r=t.__data__;return ze(e)?r[typeof e=="string"?"string":"hash"]:r.map}function It(t,e){var r=Ne(t,e);return He(r)?r:void 0}function Xe(t){return nn(t)||en(t)||!!(yt&&t&&t[yt])}function ze(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Ye(t){return!!ht&&ht in t}function Ze(t){if(t!=null){try{return Et.call(t)}catch{}try{return t+""}catch{}}return""}var Qe=Je(function(t,e){return Z(t)?Ge(t,Ve(e,1,Z)):[]});function tn(t,e){return t===e||t!==t&&e!==e}function en(t){return Z(t)&&U.call(t,"callee")&&(!Te.call(t,"callee")||Rt.call(t)==ae)}var nn=Array.isArray;function rn(t){return t!=null&&on(t.length)&&!Mt(t)}function Z(t){return an(t)&&rn(t)}function Mt(t){var e=xt(t)?Rt.call(t):"";return e==se||e==ue}function on(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ie}function xt(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function an(t){return!!t&&typeof t=="object"}var sn=Qe;const bt=$(sn);function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function un(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function V(t,e,r){return e&&un(t.prototype,e),t}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q(){return Q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Q.apply(this,arguments)}function H(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},O(t)}function tt(t,e){return tt=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},tt(t,e)}function cn(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,i;for(i=0;i<n.length;i++)o=n[i],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function ln(t,e){if(t==null)return{};var r=cn(t,e),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function w(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(t,e){return e&&(typeof e=="object"||typeof e=="function")?e:w(t)}function fn(t,e){return dn(t)||pn(t,e)||hn()}function dn(t){if(Array.isArray(t))return t}function pn(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var s=t[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(e&&r.length===e));n=!0);}catch(u){o=!0,i=u}finally{try{!n&&s.return!=null&&s.return()}finally{if(o)throw i}}return r}function hn(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var vn=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],yn=["Db","Eb","Gb","Ab","Bb"],mn={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},F=12,st=F,ut=127,bn=/([a-g])([#b]?)(\d+)/,et=12;function gn(t){if(!t)throw Error("Invalid note argument");var e=bn.exec(t.toLowerCase());if(!e)throw Error("Invalid note argument");var r=fn(e,4),n=r[1],o=r[2],i=r[3],s="".concat(n.toUpperCase()).concat(o),a=mn[s];if(a==null)throw Error("Invalid note argument");return F+a+et*parseInt(i,10)}function Nn(t){var e=(t-F)%et,r=Math.floor((t-F)/et),n=vn[e];return{note:"".concat(n).concat(r),pitchName:n,octave:r,midiNumber:t,isAccidental:yn.includes(n)}}function _n(){return nt(st,ut+1).reduce(function(t,e){return t[e]=Nn(e),t},{})}var wn=_n();function Ot(t){var e=wn[t];if(!e)throw Error("Invalid MIDI number");return e}var An=nt(st,ut+1).filter(function(t){return!Ot(t).isAccidental}),E={fromNote:gn,getAttributes:Ot,MIN_MIDI_NUMBER:st,MAX_MIDI_NUMBER:ut,NATURAL_MIDI_NUMBERS:An},ct=function(t){H(e,t);function e(){var r,n;G(this,e);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=J(this,(r=O(e)).call.apply(r,[this].concat(i))),g(w(n),"onPlayNoteInput",function(){n.props.onPlayNoteInput(n.props.midiNumber)}),g(w(n),"onStopNoteInput",function(){n.props.onStopNoteInput(n.props.midiNumber)}),n}return V(e,[{key:"getAbsoluteKeyPosition",value:function(n){var o=7,i=E.getAttributes(n),s=i.octave,a=i.pitchName,u=this.props.pitchPositions[a],c=o*s;return u+c}},{key:"getRelativeKeyPosition",value:function(n){return this.getAbsoluteKeyPosition(n)-this.getAbsoluteKeyPosition(this.props.noteRange.first)}},{key:"render",value:function(){var n=this.props,o=n.naturalKeyWidth,i=n.accidentalWidthRatio,s=n.midiNumber,a=n.gliss,u=n.useTouchEvents,c=n.accidental,d=n.active,p=n.disabled,f=n.children;return T.createElement("div",{className:rt("ReactPiano__Key",{"ReactPiano__Key--accidental":c,"ReactPiano__Key--natural":!c,"ReactPiano__Key--disabled":p,"ReactPiano__Key--active":d}),style:{left:gt(this.getRelativeKeyPosition(s)*o),width:gt(c?i*o:o)},onMouseDown:u?null:this.onPlayNoteInput,onMouseUp:u?null:this.onStopNoteInput,onMouseEnter:a?this.onPlayNoteInput:null,onMouseLeave:this.onStopNoteInput,onTouchStart:u?this.onPlayNoteInput:null,onTouchCancel:u?this.onStopNoteInput:null,onTouchEnd:u?this.onStopNoteInput:null},T.createElement("div",{className:"ReactPiano__NoteLabelContainer"},f))}}]),e}(T.Component);g(ct,"propTypes",{midiNumber:l.number.isRequired,naturalKeyWidth:l.number.isRequired,gliss:l.bool.isRequired,useTouchEvents:l.bool.isRequired,accidental:l.bool.isRequired,active:l.bool.isRequired,disabled:l.bool.isRequired,onPlayNoteInput:l.func.isRequired,onStopNoteInput:l.func.isRequired,accidentalWidthRatio:l.number.isRequired,pitchPositions:l.object.isRequired,children:l.node});g(ct,"defaultProps",{accidentalWidthRatio:.65,pitchPositions:{C:0,Db:.55,D:1,Eb:1.8,E:2,F:3,Gb:3.5,G:4,Ab:4.7,A:5,Bb:5.85,B:6}});function gt(t){return"".concat(t*100,"%")}var lt=function(t){H(e,t);function e(){return G(this,e),J(this,O(e).apply(this,arguments))}return V(e,[{key:"getMidiNumbers",value:function(){return nt(this.props.noteRange.first,this.props.noteRange.last+1)}},{key:"getNaturalKeyCount",value:function(){return this.getMidiNumbers().filter(function(n){var o=E.getAttributes(n),i=o.isAccidental;return!i}).length}},{key:"getNaturalKeyWidth",value:function(){return 1/this.getNaturalKeyCount()}},{key:"getWidth",value:function(){return this.props.width?this.props.width:"100%"}},{key:"getHeight",value:function(){if(!this.props.width)return"100%";var n=this.props.width*this.getNaturalKeyWidth();return"".concat(n/this.props.keyWidthToHeight,"px")}},{key:"render",value:function(){var n=this,o=this.getNaturalKeyWidth();return T.createElement("div",{className:rt("ReactPiano__Keyboard",this.props.className),style:{width:this.getWidth(),height:this.getHeight()}},this.getMidiNumbers().map(function(i){var s=E.getAttributes(i);s.note;var a=s.isAccidental,u=!n.props.disabled&&n.props.activeNotes.includes(i);return T.createElement(ct,{naturalKeyWidth:o,midiNumber:i,noteRange:n.props.noteRange,active:u,accidental:a,disabled:n.props.disabled,onPlayNoteInput:n.props.onPlayNoteInput,onStopNoteInput:n.props.onStopNoteInput,gliss:n.props.gliss,useTouchEvents:n.props.useTouchEvents,key:i},n.props.disabled?null:n.props.renderNoteLabel({isActive:u,isAccidental:a,midiNumber:i}))}))}}]),e}(T.Component);g(lt,"propTypes",{noteRange:Sn,activeNotes:l.arrayOf(l.number),onPlayNoteInput:l.func.isRequired,onStopNoteInput:l.func.isRequired,renderNoteLabel:l.func.isRequired,keyWidthToHeight:l.number.isRequired,className:l.string,disabled:l.bool,gliss:l.bool,useTouchEvents:l.bool,width:l.number});g(lt,"defaultProps",{disabled:!1,gliss:!1,useTouchEvents:!1,keyWidthToHeight:.33,renderNoteLabel:function(){}});function Nt(t){return typeof t!="number"?!1:E.NATURAL_MIDI_NUMBERS.includes(t)}function Sn(t,e,r){var n=t[e],o=n.first,i=n.last;if(!o||!i)return new Error("Invalid prop ".concat(e," supplied to ").concat(r,". ").concat(e," must be an object with .first and .last values."));if(!Nt(o)||!Nt(i))return new Error("Invalid prop ".concat(e," supplied to ").concat(r,". ").concat(e," values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes)."));if(o>=i)return new Error("Invalid prop ".concat(e," supplied to ").concat(r,". ").concat(e,".first must be smaller than ").concat(e,".last."))}var ft=function(t){H(e,t);function e(){var r,n;G(this,e);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=J(this,(r=O(e)).call.apply(r,[this].concat(i))),g(w(n),"state",{isMouseDown:!1,useTouchEvents:!1}),g(w(n),"handleNoteChanges",function(a){var u=a.prevActiveNotes,c=a.nextActiveNotes;if(!n.props.disabled){var d=bt(u,c),p=bt(c,u);p.forEach(function(f){n.props.playNote(f)}),d.forEach(function(f){n.props.stopNote(f)})}}),g(w(n),"getMidiNumberForKey",function(a){if(!n.props.keyboardShortcuts)return null;var u=n.props.keyboardShortcuts.find(function(c){return c.key===a});return u&&u.midiNumber}),g(w(n),"getKeyForMidiNumber",function(a){if(!n.props.keyboardShortcuts)return null;var u=n.props.keyboardShortcuts.find(function(c){return c.midiNumber===a});return u&&u.key}),g(w(n),"onKeyDown",function(a){if(!(a.ctrlKey||a.metaKey||a.shiftKey)){var u=n.getMidiNumberForKey(a.key);u&&n.onPlayNoteInput(u)}}),g(w(n),"onKeyUp",function(a){var u=n.getMidiNumberForKey(a.key);u&&n.onStopNoteInput(u)}),g(w(n),"onPlayNoteInput",function(a){n.props.disabled||n.props.onPlayNoteInput(a,n.props.activeNotes)}),g(w(n),"onStopNoteInput",function(a){n.props.disabled||n.props.onStopNoteInput(a,n.props.activeNotes)}),g(w(n),"onMouseDown",function(){n.setState({isMouseDown:!0})}),g(w(n),"onMouseUp",function(){n.setState({isMouseDown:!1})}),g(w(n),"onTouchStart",function(){n.setState({useTouchEvents:!0})}),g(w(n),"renderNoteLabel",function(a){var u=a.midiNumber,c=a.isActive,d=a.isAccidental,p=n.getKeyForMidiNumber(u);return n.props.renderNoteLabel({keyboardShortcut:p,midiNumber:u,isActive:c,isAccidental:d})}),n}return V(e,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"componentDidUpdate",value:function(n,o){this.props.activeNotes!==n.activeNotes&&this.handleNoteChanges({prevActiveNotes:n.activeNotes||[],nextActiveNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){return T.createElement("div",{style:{width:"100%",height:"100%"},onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchStart:this.onTouchStart,"data-testid":"container"},T.createElement(lt,{noteRange:this.props.noteRange,onPlayNoteInput:this.onPlayNoteInput,onStopNoteInput:this.onStopNoteInput,activeNotes:this.props.activeNotes,className:this.props.className,disabled:this.props.disabled,width:this.props.width,keyWidthToHeight:this.props.keyWidthToHeight,gliss:this.state.isMouseDown,useTouchEvents:this.state.useTouchEvents,renderNoteLabel:this.renderNoteLabel}))}}]),e}(T.Component);g(ft,"propTypes",{noteRange:l.object.isRequired,activeNotes:l.arrayOf(l.number.isRequired).isRequired,playNote:l.func.isRequired,stopNote:l.func.isRequired,onPlayNoteInput:l.func.isRequired,onStopNoteInput:l.func.isRequired,renderNoteLabel:l.func.isRequired,className:l.string,disabled:l.bool,width:l.number,keyWidthToHeight:l.number,keyboardShortcuts:l.arrayOf(l.shape({key:l.string.isRequired,midiNumber:l.number.isRequired}))});g(ft,"defaultProps",{renderNoteLabel:function(e){var r=e.keyboardShortcut;e.midiNumber;var n=e.isActive,o=e.isAccidental;return r?T.createElement("div",{className:rt("ReactPiano__NoteLabel",{"ReactPiano__NoteLabel--active":n,"ReactPiano__NoteLabel--accidental":o,"ReactPiano__NoteLabel--natural":!o})},r):null}});var jt=function(t){H(e,t);function e(){var r,n;G(this,e);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=J(this,(r=O(e)).call.apply(r,[this].concat(i))),g(w(n),"state",{activeNotes:n.props.activeNotes||[]}),g(w(n),"handlePlayNoteInput",function(a){n.setState(function(u){return n.props.onPlayNoteInput&&n.props.onPlayNoteInput(a,{prevActiveNotes:u.activeNotes}),u.activeNotes.includes(a)?null:{activeNotes:u.activeNotes.concat(a)}})}),g(w(n),"handleStopNoteInput",function(a){n.setState(function(u){return n.props.onStopNoteInput&&n.props.onStopNoteInput(a,{prevActiveNotes:n.state.activeNotes}),{activeNotes:u.activeNotes.filter(function(c){return a!==c})}})}),n}return V(e,[{key:"componentDidUpdate",value:function(n){n.activeNotes!==this.props.activeNotes&&this.state.activeNotes!==this.props.activeNotes&&this.setState({activeNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){var n=this.props;n.activeNotes,n.onPlayNoteInput,n.onStopNoteInput;var o=ln(n,["activeNotes","onPlayNoteInput","onStopNoteInput"]);return T.createElement(ft,Q({activeNotes:this.state.activeNotes,onPlayNoteInput:this.handlePlayNoteInput,onStopNoteInput:this.handleStopNoteInput},o))}}]),e}(T.Component);g(jt,"propTypes",{noteRange:l.object.isRequired,activeNotes:l.arrayOf(l.number.isRequired),playNote:l.func.isRequired,stopNote:l.func.isRequired,onPlayNoteInput:l.func,onStopNoteInput:l.func,renderNoteLabel:l.func,className:l.string,disabled:l.bool,width:l.number,keyWidthToHeight:l.number,keyboardShortcuts:l.arrayOf(l.shape({key:l.string.isRequired,midiNumber:l.number.isRequired}))});function Tn(t){for(var e=t.firstNote,r=t.lastNote,n=t.keyboardConfig,o=e,i=0,s=[];i<n.length&&o<=r;){var a=n[i],u=E.getAttributes(o),c=u.isAccidental;c?s.push({key:a.flat,midiNumber:o}):(s.push({key:a.natural,midiNumber:o}),i+=1),o+=1}return s}var _t={create:Tn,BOTTOM_ROW:[{natural:"z",flat:"a",sharp:"s"},{natural:"x",flat:"s",sharp:"d"},{natural:"c",flat:"d",sharp:"f"},{natural:"v",flat:"f",sharp:"g"},{natural:"b",flat:"g",sharp:"h"},{natural:"n",flat:"h",sharp:"j"},{natural:"m",flat:"j",sharp:"k"},{natural:",",flat:"k",sharp:"l"},{natural:".",flat:"l",sharp:";"},{natural:"/",flat:";",sharp:"'"}],HOME_ROW:[{natural:"a",flat:"q",sharp:"w"},{natural:"s",flat:"w",sharp:"e"},{natural:"d",flat:"e",sharp:"r"},{natural:"f",flat:"r",sharp:"t"},{natural:"g",flat:"t",sharp:"y"},{natural:"h",flat:"y",sharp:"u"},{natural:"j",flat:"u",sharp:"i"},{natural:"k",flat:"i",sharp:"o"},{natural:"l",flat:"o",sharp:"p"},{natural:";",flat:"p",sharp:"["},{natural:"'",flat:"[",sharp:"]"}],QWERTY_ROW:[{natural:"q",flat:"1",sharp:"2"},{natural:"w",flat:"2",sharp:"3"},{natural:"e",flat:"3",sharp:"4"},{natural:"r",flat:"4",sharp:"5"},{natural:"t",flat:"5",sharp:"6"},{natural:"y",flat:"6",sharp:"7"},{natural:"u",flat:"7",sharp:"8"},{natural:"i",flat:"8",sharp:"9"},{natural:"o",flat:"9",sharp:"0"},{natural:"p",flat:"0",sharp:"-"},{natural:"[",flat:"-",sharp:"="}]},kt={exports:{}},Ct={exports:{}};function Pn(t){return t>64&&t<91?t-65:t>96&&t<123?t-71:t>47&&t<58?t+4:t===43?62:t===47?63:0}function En(t,e){for(var r=t.replace(/[^A-Za-z0-9\+\/]/g,""),n=r.length,o=e?Math.ceil((n*3+1>>2)/e)*e:n*3+1>>2,i=new Uint8Array(o),s,a,u=0,c=0,d=0;d<n;d++)if(a=d&3,u|=Pn(r.charCodeAt(d))<<18-6*a,a===3||n-d===1){for(s=0;s<3&&c<o;s++,c++)i[c]=u>>>(16>>>s&24)&255;u=0}return i}var Rn={decode:En},In=function(t,e){return new Promise(function(r,n){var o=new XMLHttpRequest;e&&(o.responseType=e),o.open("GET",t),o.onload=function(){o.status===200?r(o.response):n(Error(o.statusText))},o.onerror=function(){n(Error("Network Error"))},o.send()})};(function(t){var e=Rn,r=In;function n(v){return function(h){return typeof h=="string"&&v.test(h)}}function o(v,h){return typeof v=="string"?v+h:typeof v=="function"?v(h):h}function i(v,h,N,_){var M=s(h)?a:u(h)?c:d(h)?p:f(h)?m:y(h)?b:A(h)?X:Vt(h)?Ht:Jt(h)?Xt:null,R=N||{};return M?M(v,h,R):_?Promise.resolve(_):Promise.reject("Source not valid ("+h+")")}i.fetch=r;function s(v){return v instanceof ArrayBuffer}function a(v,h,N){return new Promise(function(_,M){v.decodeAudioData(h,function(R){_(R)},function(){M("Can't decode audio data ("+h.slice(0,30)+"...)")})})}var u=n(/\.(mp3|wav|ogg)(\?.*)?$/i);function c(v,h,N){var _=o(N.from,h);return i(v,i.fetch(_,"arraybuffer"),N)}function d(v){return v&&typeof v.then=="function"}function p(v,h,N){return h.then(function(_){return i(v,_,N)})}var f=Array.isArray;function m(v,h,N){return Promise.all(h.map(function(_){return i(v,_,N,_)}))}function y(v){return v&&typeof v=="object"}function b(v,h,N){var _={},M=Object.keys(h).map(function(R){if(N.only&&N.only.indexOf(R)===-1)return null;var pt=h[R];return i(v,pt,N,pt).then(function(Yt){_[R]=Yt})});return Promise.all(M).then(function(){return _})}var A=n(/\.json(\?.*)?$/i);function X(v,h,N){var _=o(N.from,h);return i(v,i.fetch(_,"text").then(JSON.parse),N)}var Vt=n(/^data:audio/);function Ht(v,h,N){var _=h.indexOf(",");return i(v,e.decode(h.slice(_+1)).buffer,N)}var Jt=n(/\.js(\?.*)?$/i);function Xt(v,h,N){var _=o(N.from,h);return i(v,i.fetch(_,"text").then(zt),N)}function zt(v){var h=v.indexOf("MIDI.Soundfont.");if(h<0)throw Error("Invalid MIDI.js Soundfont format");h=v.indexOf("=",h)+2;var N=v.lastIndexOf(",");return JSON.parse(v.slice(h,N)+"}")}t.exports&&(t.exports=i),typeof window<"u"&&(window.loadAudio=i)})(Ct);var Mn=Ct.exports,Dt={exports:{}},xn=On;function On(t){var e=t.createGain(),r=e._voltage=Cn(t),n=x(r),o=x(r),i=x(r);return e._startAmount=x(o),e._endAmount=x(i),e._multiplier=x(n),e._multiplier.connect(e),e._startAmount.connect(e),e._endAmount.connect(e),e.value=n.gain,e.startValue=o.gain,e.endValue=i.gain,e.startValue.value=0,e.endValue.value=0,Object.defineProperties(e,jn),e}var jn={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(t){var e=this._multiplier.gain,r=this._startAmount.gain,n=this._endAmount.gain;this._voltage.start(t),this._decayFrom=this._decayFrom=t+this.attack,this._startedAt=t;var o=this.sustain;e.cancelScheduledValues(t),r.cancelScheduledValues(t),n.cancelScheduledValues(t),n.setValueAtTime(0,t),this.attack?(e.setValueAtTime(0,t),e.linearRampToValueAtTime(1,t+this.attack),r.setValueAtTime(1,t),r.linearRampToValueAtTime(0,t+this.attack)):(e.setValueAtTime(1,t),r.setValueAtTime(0,t)),this.decay&&e.setTargetAtTime(o,this._decayFrom,wt(this.decay))}},stop:{value:function(t,e){e&&(t=t-this.release);var r=t+this.release;if(this.release){var n=this._multiplier.gain,o=this._startAmount.gain,i=this._endAmount.gain;n.cancelScheduledValues(t),o.cancelScheduledValues(t),i.cancelScheduledValues(t);var s=wt(this.release);if(this.attack&&t<this._decayFrom){var a=Dn(0,1,this._startedAt,this._decayFrom,t);n.linearRampToValueAtTime(a,t),o.linearRampToValueAtTime(1-a,t),o.setTargetAtTime(0,t,s)}i.setTargetAtTime(1,t,s),n.setTargetAtTime(0,t,s)}return this._voltage.stop(r),r}},onended:{get:function(){return this._voltage.onended},set:function(t){this._voltage.onended=t}}},kn=new Float32Array([1,1]);function Cn(t){var e=t.createBufferSource(),r=t.createBuffer(1,2,t.sampleRate);return r.getChannelData(0).set(kn),e.buffer=r,e.loop=!0,e}function x(t){var e=t.context.createGain();return t.connect(e),e}function wt(t){return Math.log(t+1)/Math.log(100)}function Dn(t,e,r,n,o){var i=e-t,s=n-r,a=o-r,u=a/s,c=t+u*i;return c<=t&&(c=t),c>=e&&(c=e),c}var qn=xn,Kn={},Ln={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function Fn(t,e,r){var n=!1,o=0,i={},s=t.createGain();s.gain.value=1;var a=Object.assign({},Ln,r),u={context:t,out:s,opts:a};return e instanceof AudioBuffer?u.buffer=e:u.buffers=e,u.start=function(p,f,m){if(u.buffer&&p!==null)return u.start(null,p,f);var y=p?u.buffers[p]:u.buffer;if(y){if(!n){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+p+" not found.");return}var b=m||Kn;f=Math.max(t.currentTime,f||0),u.emit("start",f,p,b);var A=d(p,y,b);return A.id=c(p,A),A.env.start(f),A.source.start(f),u.emit("started",f,A.id,A),b.duration&&A.stop(f+b.duration),A},u.play=function(p,f,m){return u.start(p,f,m)},u.stop=function(p,f){var m;return f=f||Object.keys(i),f.map(function(y){return m=i[y],m?(m.stop(p),m.id):null})},u.connect=function(p){return n=!0,s.connect(p),u},u.emit=function(p,f,m,y){u.onevent&&u.onevent(p,f,m,y);var b=u["on"+p];b&&b(f,m,y)},u;function c(p,f){return f.id=o++,i[f.id]=f,f.source.onended=function(){var m=t.currentTime;f.source.disconnect(),f.env.disconnect(),f.disconnect(),u.emit("ended",m,f.id,f)},f.id}function d(p,f,m){var y=t.createGain();return y.gain.value=0,y.connect(s),y.env=Un(t,m,a),y.env.connect(y.gain),y.source=t.createBufferSource(),y.source.buffer=f,y.source.connect(y),y.source.loop=m.loop||a.loop,y.source.playbackRate.value=Bn(m.cents||a.cents),y.source.loopStart=m.loopStart||a.loopStart,y.source.loopEnd=m.loopEnd||a.loopEnd,y.stop=function(b){var A=b||t.currentTime;u.emit("stop",A,p);var X=y.env.stop(A);y.source.stop(X)},y}}function At(t){return typeof t=="number"}var $n=["attack","decay","sustain","release"];function Un(t,e,r){var n=qn(t),o=e.adsr||r.adsr;return $n.forEach(function(i,s){o?n[i]=o[s]:n[i]=e[i]||r[i]}),n.value.value=At(e.gain)?e.gain:At(r.gain)?r.gain:1,n}function Bn(t){return t?Math.pow(2,t/1200):1}var Wn=Fn,Gn=function(t){return t.on=function(e,r){if(arguments.length===1&&typeof e=="function")return t.on("event",e);var n="on"+e,o=t[n];return t[n]=o?Vn(o,r):r,t},t};function Vn(t,e){return function(r,n,o,i){t(r,n,o,i),e(r,n,o,i)}}var qt=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function Hn(){return qt}var Jn=[0,2,4,5,7,9,11];function Kt(t,e,r){if(typeof t!="string")return null;var n=qt.exec(t);if(!n||!e&&n[4])return null;var o={letter:n[1].toUpperCase(),acc:n[2].replace(/x/g,"##")};return o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt=o.acc[0]==="b"?-o.acc.length:o.acc.length,o.chroma=Jn[o.step]+o.alt,n[3]&&(o.oct=+n[3],o.midi=o.chroma+12*(o.oct+1),o.freq=Lt(o.midi,r)),e&&(o.tonicOf=n[4]),o}function Lt(t,e){return Math.pow(2,(t-69)/12)*(e||440)}var Ft={parse:Kt,regex:Hn,midiToFreq:Lt},Xn=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];Xn.forEach(function(t){Ft[t]=function(e){var r=Kt(e);return r&&typeof r[t]<"u"?r[t]:null}});var zn=Ft,Yn=zn,Zn=function(t){return t!==null&&t!==[]&&t>=0&&t<129},Qn=function(t){return Zn(t)?+t:Yn.midi(t)},tr=function(t){if(t.buffers){var e=t.opts.map,r=typeof e=="function"?e:Qn,n=function(i){return i?r(i)||i:null};t.buffers=er(t.buffers,n);var o=t.start;t.start=function(i,s,a){var u=n(i),c=u%1;return c&&(u=Math.floor(u),a=Object.assign(a||{},{cents:Math.floor(c*100)})),o(u,s,a)}}return t};function er(t,e){return Object.keys(t).reduce(function(r,n){return r[e(n)]=t[n],r},{})}var nr=Array.isArray,rr=function(t){return t&&typeof t=="object"},or={},ir=function(t){return t.schedule=function(e,r){var n=t.context.currentTime,o=e<n?n:e;t.emit("schedule",o,r);var i,s,a,u;return r.map(function(c){if(c)nr(c)?(i=c[0],s=c[1]):(i=c.time,s=c);else return null;return rr(s)?(a=s.name||s.key||s.note||s.midi||null,u=s):(a=s,u=or),t.start(a,o+(i||0),u)})},t};function q(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $t={exports:{}};(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,o,i){function s(c,d){if(!o[c]){if(!n[c]){var p=typeof q=="function"&&q;if(!d&&p)return p(c,!0);if(a)return a(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var m=o[c]={exports:{}};n[c][0].call(m.exports,function(y){var b=n[c][1][y];return s(b||y)},m,m.exports,r,n,o,i)}return o[c].exports}for(var a=typeof q=="function"&&q,u=0;u<i.length;u++)s(i[u]);return s}({1:[function(r,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(i){function s(a){if(this._event=a,this._data=a.data,this.receivedTime=a.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=a.data[0]&240,this.channel=a.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=a.data[1]&127,this.velocity=a.data[2]&127;break;case 144:this.messageType="noteon",this.key=a.data[1]&127,this.velocity=a.data[2]&127;break;case 160:this.messageType="keypressure",this.key=a.data[1]&127,this.pressure=a.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=a.data[1]&127,this.controllerValue=a.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=a.data[1];break;case 208:this.messageType="channelpressure",this.pressure=a.data[1]&127;break;case 224:this.messageType="pitchbendchange";var u=a.data[2]&127,c=a.data[1]&127;this.pitchBend=(u<<8)+c;break}}return new s(i)},n.exports=o.default},{}]},{},[1])(1)})})($t);var ar=$t.exports,sr=ar,ur=function(t){return t.listenToMidi=function(e,r){var n={},o=r||{},i=o.gain||function(s){return s/127};return e.onmidimessage=function(s){var a=s.messageType?s:sr(s);if(a.messageType==="noteon"&&a.velocity===0&&(a.messageType="noteoff"),!(o.channel&&a.channel!==o.channel))switch(a.messageType){case"noteon":n[a.key]=t.play(a.key,0,{gain:i(a.velocity)});break;case"noteoff":n[a.key]&&(n[a.key].stop(),delete n[a.key]);break}},t},t};(function(t){var e=Wn,r=Gn,n=tr,o=ir,i=ur;function s(a,u,c){return i(o(n(r(e(a,u,c)))))}t.exports&&(t.exports=s),typeof window<"u"&&(window.SamplePlayer=s)})(Dt);var cr=Dt.exports;function St(t,e){return Array(e+1).join(t)}function dt(t){return typeof t=="number"}function lr(t){return typeof t=="string"}function fr(t){return typeof t<"u"}function Ut(t,e){return Math.pow(2,(t-69)/12)*(e||440)}var Bt=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function dr(){return Bt}var pr=[0,2,4,5,7,9,11];function P(t,e,r){if(typeof t!="string")return null;var n=Bt.exec(t);if(!n||!e&&n[4])return null;var o={letter:n[1].toUpperCase(),acc:n[2].replace(/x/g,"##")};o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt=o.acc[0]==="b"?-o.acc.length:o.acc.length;var i=pr[o.step]+o.alt;return o.chroma=i<0?12+i:i%12,n[3]&&(o.oct=+n[3],o.midi=i+12*(o.oct+1),o.freq=Ut(o.midi,r)),e&&(o.tonicOf=n[4]),o}var hr="CDEFGAB";function vr(t){return dt(t)?t<0?St("b",-t):St("#",t):""}function yr(t){return dt(t)?""+t:""}function Wt(t,e,r){return t===null||typeof t>"u"?null:t.step?Wt(t.step,t.alt,t.oct):t<0||t>6?null:hr.charAt(t)+vr(e)+yr(r)}function Gt(t){if((dt(t)||lr(t))&&t>=0&&t<128)return+t;var e=P(t);return e&&fr(e.midi)?e.midi:null}function mr(t,e){var r=Gt(t);return r===null?null:Ut(r,e)}function br(t){return(P(t)||{}).letter}function gr(t){return(P(t)||{}).acc}function Nr(t){return(P(t)||{}).pc}function _r(t){return(P(t)||{}).step}function wr(t){return(P(t)||{}).alt}function Ar(t){return(P(t)||{}).chroma}function Sr(t){return(P(t)||{}).oct}const Tr=Object.freeze(Object.defineProperty({__proto__:null,acc:gr,alt:wr,build:Wt,chroma:Ar,freq:mr,letter:br,midi:Gt,oct:Sr,parse:P,pc:Nr,regex:dr,step:_r},Symbol.toStringTag,{value:"Module"})),Pr=Zt(Tr);var Y,Tt;function Er(){if(Tt)return Y;Tt=1;var t=Pr;function e(o,i){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof e))return new e(o);this.nameToUrl=i||e.nameToUrl,this.ctx=o,this.instruments={},this.promises=[]}e.prototype.onready=function(o){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(o)},e.prototype.instrument=function(o,i){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var s=this.ctx;if(o=o||"default",o in this.instruments)return this.instruments[o];var a={name:o,play:n(s,i)};if(this.instruments[o]=a,o!=="default"){var u=e.instrument(s,o,i).then(function(c){return a.play=c.play,a});this.promises.push(u),a.onready=function(c){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),u.then(c)}}else a.onready=function(c){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),c()};return a};function r(o,i,s){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),e.instrument(o,i,s).then(function(a){return a.buffers})}e.loadBuffers=r;function n(o,i){return i=i||{},function(s,a,u,c){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var d=s>0&&s<129?+s:t.midi(s),p=d?t.midiToFreq(d,440):null;if(p){u=u||.2,c=c||{};var f=c.destination||i.destination||o.destination,m=c.vcoType||i.vcoType||"sine",y=c.gain||i.gain||.4,b=o.createOscillator();b.type=m,b.frequency.value=p;var A=o.createGain();return A.gain.value=y,b.connect(A),A.connect(f),b.start(a),u>0&&b.stop(a+u),b}}}return e.noteToMidi=t.midi,Y=e,Y}(function(t){var e=Mn,r=cr;function n(a,u,c){if(arguments.length===1)return function(y,b){return n(a,y,b)};var d=c||{},p=d.isSoundfontURL||o,f=d.nameToUrl||i,m=p(u)?u:f(u,d.soundfont,d.format);return e(a,m,{only:d.only||d.notes}).then(function(y){var b=r(a,y,d).connect(d.destination?d.destination:a.destination);return b.url=m,b.name=u,b})}function o(a){return/\.js(\?.*)?$/i.test(a)}function i(a,u,c){return c=c==="ogg"?c:"mp3",u=u==="FluidR3_GM"?u:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+u+"/"+a+"-"+c+".js"}var s=Er();s.instrument=n,s.nameToUrl=i,t.exports&&(t.exports=s),typeof window<"u"&&(window.Soundfont=s)})(kt);var Rr=kt.exports;const Ir=$(Rr),Mr=()=>{const[t,e]=K.useState(null),[r,n]=K.useState(null),o=E.fromNote("c3"),i=E.fromNote("f5"),s=_t.create({firstNote:o,lastNote:i,keyboardConfig:_t.HOME_ROW});K.useEffect(()=>{const c=new(window.AudioContext||window.webkitAudioContext);return e(c),Ir.instrument(c,"acoustic_grand_piano").then(d=>{n(d)}),()=>{t&&t.close()}},[]);const a=c=>{if(r){const d=E.getAttributes(c).note;r.play(d)}},u=c=>{r&&r.stop()};return S.jsx("div",{children:S.jsx(jt,{noteRange:{first:o,last:i},playNote:a,stopNote:u,width:1e3,keyboardShortcuts:s})})};function jr(){const[t,e]=K.useState(null),r=n=>{e(n),Qt(te[n])};return S.jsxs("div",{children:[S.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-4 p-6",children:[S.jsx("button",{className:"button-85",onClick:()=>r("C4"),children:"Play C4"}),S.jsx("button",{className:"button-85",onClick:()=>r("D4"),children:"Play D4"}),S.jsx("button",{className:"button-85",onClick:()=>r("E4"),children:"Play E4"}),S.jsx("button",{className:"button-85",onClick:()=>r("F4"),children:"Play F4"}),S.jsx("button",{className:"button-85",onClick:()=>r("G4"),children:"Play G4"}),S.jsx("button",{className:"button-85",onClick:()=>r("A4"),children:"Play A4"}),S.jsx("button",{className:"button-85",onClick:()=>r("B4"),children:"Play B4"})]}),t&&S.jsxs("p",{children:["Played Note: ",t]}),S.jsx(Mr,{})]})}export{jr as default};
