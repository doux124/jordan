import{h as Ze,b as B,r as E,j as S,c as $,R as P,u as Qe}from"./index-RGEXWVy_.js";import{P as l,F as et,f as tt}from"./faHome-BGZCx4AG.js";/* empty css               */var Ee={exports:{}},Re={exports:{}};function nt(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0}function rt(e,t){for(var r=e.replace(/[^A-Za-z0-9\+\/]/g,""),n=r.length,o=t?Math.ceil((n*3+1>>2)/t)*t:n*3+1>>2,i=new Uint8Array(o),s,a,u=0,c=0,h=0;h<n;h++)if(a=h&3,u|=nt(r.charCodeAt(h))<<18-6*a,a===3||n-h===1){for(s=0;s<3&&c<o;s++,c++)i[c]=u>>>(16>>>s&24)&255;u=0}return i}var ot={decode:rt},it=function(e,t){return new Promise(function(r,n){var o=new XMLHttpRequest;t&&(o.responseType=t),o.open("GET",e),o.onload=function(){o.status===200?r(o.response):n(Error(o.statusText))},o.onerror=function(){n(Error("Network Error"))},o.send()})};(function(e){var t=ot,r=it;function n(g){return function(v){return typeof v=="string"&&g.test(v)}}function o(g,v){return typeof g=="string"?g+v:typeof g=="function"?g(v):v}function i(g,v,_,A){var O=s(v)?a:u(v)?c:h(v)?p:f(v)?b:m(v)?d:y(v)?T:I(v)?Y:Je(v)?Xe:null,M=_||{};return O?O(g,v,M):A?Promise.resolve(A):Promise.reject("Source not valid ("+v+")")}i.fetch=r;function s(g){return g instanceof ArrayBuffer}function a(g,v,_){return new Promise(function(A,O){g.decodeAudioData(v,function(M){A(M)},function(){O("Can't decode audio data ("+v.slice(0,30)+"...)")})})}var u=n(/\.(mp3|wav|ogg)(\?.*)?$/i);function c(g,v,_){var A=o(_.from,v);return i(g,i.fetch(A,"arraybuffer"),_)}function h(g){return g&&typeof g.then=="function"}function p(g,v,_){return v.then(function(A){return i(g,A,_)})}var f=Array.isArray;function b(g,v,_){return Promise.all(v.map(function(A){return i(g,A,_,A)}))}function m(g){return g&&typeof g=="object"}function d(g,v,_){var A={},O=Object.keys(v).map(function(M){if(_.only&&_.only.indexOf(M)===-1)return null;var ve=v[M];return i(g,ve,_,ve).then(function(Ye){A[M]=Ye})});return Promise.all(O).then(function(){return A})}var y=n(/\.json(\?.*)?$/i);function T(g,v,_){var A=o(_.from,v);return i(g,i.fetch(A,"text").then(JSON.parse),_)}var I=n(/^data:audio/);function Y(g,v,_){var A=v.indexOf(",");return i(g,t.decode(v.slice(A+1)).buffer,_)}var Je=n(/\.js(\?.*)?$/i);function Xe(g,v,_){var A=o(_.from,v);return i(g,i.fetch(A,"text").then(ze),_)}function ze(g){var v=g.indexOf("MIDI.Soundfont.");if(v<0)throw Error("Invalid MIDI.js Soundfont format");v=g.indexOf("=",v)+2;var _=g.lastIndexOf(",");return JSON.parse(g.slice(v,_)+"}")}e.exports&&(e.exports=i),typeof window<"u"&&(window.loadAudio=i)})(Re);var at=Re.exports,xe={exports:{}},st=ut;function ut(e){var t=e.createGain(),r=t._voltage=ft(e),n=k(r),o=k(r),i=k(r);return t._startAmount=k(o),t._endAmount=k(i),t._multiplier=k(n),t._multiplier.connect(t),t._startAmount.connect(t),t._endAmount.connect(t),t.value=n.gain,t.startValue=o.gain,t.endValue=i.gain,t.startValue.value=0,t.endValue.value=0,Object.defineProperties(t,ct),t}var ct={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(e){var t=this._multiplier.gain,r=this._startAmount.gain,n=this._endAmount.gain;this._voltage.start(e),this._decayFrom=this._decayFrom=e+this.attack,this._startedAt=e;var o=this.sustain;t.cancelScheduledValues(e),r.cancelScheduledValues(e),n.cancelScheduledValues(e),n.setValueAtTime(0,e),this.attack?(t.setValueAtTime(0,e),t.linearRampToValueAtTime(1,e+this.attack),r.setValueAtTime(1,e),r.linearRampToValueAtTime(0,e+this.attack)):(t.setValueAtTime(1,e),r.setValueAtTime(0,e)),this.decay&&t.setTargetAtTime(o,this._decayFrom,me(this.decay))}},stop:{value:function(e,t){t&&(e=e-this.release);var r=e+this.release;if(this.release){var n=this._multiplier.gain,o=this._startAmount.gain,i=this._endAmount.gain;n.cancelScheduledValues(e),o.cancelScheduledValues(e),i.cancelScheduledValues(e);var s=me(this.release);if(this.attack&&e<this._decayFrom){var a=dt(0,1,this._startedAt,this._decayFrom,e);n.linearRampToValueAtTime(a,e),o.linearRampToValueAtTime(1-a,e),o.setTargetAtTime(0,e,s)}i.setTargetAtTime(1,e,s),n.setTargetAtTime(0,e,s)}return this._voltage.stop(r),r}},onended:{get:function(){return this._voltage.onended},set:function(e){this._voltage.onended=e}}},lt=new Float32Array([1,1]);function ft(e){var t=e.createBufferSource(),r=e.createBuffer(1,2,e.sampleRate);return r.getChannelData(0).set(lt),t.buffer=r,t.loop=!0,t}function k(e){var t=e.context.createGain();return e.connect(t),t}function me(e){return Math.log(e+1)/Math.log(100)}function dt(e,t,r,n,o){var i=t-e,s=n-r,a=o-r,u=a/s,c=e+u*i;return c<=e&&(c=e),c>=t&&(c=t),c}var pt=st,ht={},vt={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function mt(e,t,r){var n=!1,o=0,i={},s=e.createGain();s.gain.value=1;var a=Object.assign({},vt,r),u={context:e,out:s,opts:a};return t instanceof AudioBuffer?u.buffer=t:u.buffers=t,u.start=function(p,f,b){if(u.buffer&&p!==null)return u.start(null,p,f);var m=p?u.buffers[p]:u.buffer;if(m){if(!n){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+p+" not found.");return}var d=b||ht;f=Math.max(e.currentTime,f||0),u.emit("start",f,p,d);var y=h(p,m,d);return y.id=c(p,y),y.env.start(f),y.source.start(f),u.emit("started",f,y.id,y),d.duration&&y.stop(f+d.duration),y},u.play=function(p,f,b){return u.start(p,f,b)},u.stop=function(p,f){var b;return f=f||Object.keys(i),f.map(function(m){return b=i[m],b?(b.stop(p),b.id):null})},u.connect=function(p){return n=!0,s.connect(p),u},u.emit=function(p,f,b,m){u.onevent&&u.onevent(p,f,b,m);var d=u["on"+p];d&&d(f,b,m)},u;function c(p,f){return f.id=o++,i[f.id]=f,f.source.onended=function(){var b=e.currentTime;f.source.disconnect(),f.env.disconnect(),f.disconnect(),u.emit("ended",b,f.id,f)},f.id}function h(p,f,b){var m=e.createGain();return m.gain.value=0,m.connect(s),m.env=gt(e,b,a),m.env.connect(m.gain),m.source=e.createBufferSource(),m.source.buffer=f,m.source.connect(m),m.source.loop=b.loop||a.loop,m.source.playbackRate.value=bt(b.cents||a.cents),m.source.loopStart=b.loopStart||a.loopStart,m.source.loopEnd=b.loopEnd||a.loopEnd,m.stop=function(d){var y=d||e.currentTime;u.emit("stop",y,p);var T=m.env.stop(y);m.source.stop(T)},m}}function ye(e){return typeof e=="number"}var yt=["attack","decay","sustain","release"];function gt(e,t,r){var n=pt(e),o=t.adsr||r.adsr;return yt.forEach(function(i,s){o?n[i]=o[s]:n[i]=t[i]||r[i]}),n.value.value=ye(t.gain)?t.gain:ye(r.gain)?r.gain:1,n}function bt(e){return e?Math.pow(2,e/1200):1}var Nt=mt,_t=function(e){return e.on=function(t,r){if(arguments.length===1&&typeof t=="function")return e.on("event",t);var n="on"+t,o=e[n];return e[n]=o?At(o,r):r,e},e};function At(e,t){return function(r,n,o,i){e(r,n,o,i),t(r,n,o,i)}}var Ie=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function St(){return Ie}var wt=[0,2,4,5,7,9,11];function Me(e,t,r){if(typeof e!="string")return null;var n=Ie.exec(e);if(!n||!t&&n[4])return null;var o={letter:n[1].toUpperCase(),acc:n[2].replace(/x/g,"##")};return o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt=o.acc[0]==="b"?-o.acc.length:o.acc.length,o.chroma=wt[o.step]+o.alt,n[3]&&(o.oct=+n[3],o.midi=o.chroma+12*(o.oct+1),o.freq=je(o.midi,r)),t&&(o.tonicOf=n[4]),o}function je(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var Oe={parse:Me,regex:St,midiToFreq:je},Tt=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];Tt.forEach(function(e){Oe[e]=function(t){var r=Me(t);return r&&typeof r[e]<"u"?r[e]:null}});var Pt=Oe,Et=Pt,Rt=function(e){return e!==null&&e!==[]&&e>=0&&e<129},xt=function(e){return Rt(e)?+e:Et.midi(e)},It=function(e){if(e.buffers){var t=e.opts.map,r=typeof t=="function"?t:xt,n=function(i){return i?r(i)||i:null};e.buffers=Mt(e.buffers,n);var o=e.start;e.start=function(i,s,a){var u=n(i),c=u%1;return c&&(u=Math.floor(u),a=Object.assign(a||{},{cents:Math.floor(c*100)})),o(u,s,a)}}return e};function Mt(e,t){return Object.keys(e).reduce(function(r,n){return r[t(n)]=e[n],r},{})}var jt=Array.isArray,Ot=function(e){return e&&typeof e=="object"},kt={},Ct=function(e){return e.schedule=function(t,r){var n=e.context.currentTime,o=t<n?n:t;e.emit("schedule",o,r);var i,s,a,u;return r.map(function(c){if(c)jt(c)?(i=c[0],s=c[1]):(i=c.time,s=c);else return null;return Ot(s)?(a=s.name||s.key||s.note||s.midi||null,u=s):(a=s,u=kt),e.start(a,o+(i||0),u)})},e};function L(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ke={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,o,i){function s(c,h){if(!o[c]){if(!n[c]){var p=typeof L=="function"&&L;if(!h&&p)return p(c,!0);if(a)return a(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var b=o[c]={exports:{}};n[c][0].call(b.exports,function(m){var d=n[c][1][m];return s(d||m)},b,b.exports,r,n,o,i)}return o[c].exports}for(var a=typeof L=="function"&&L,u=0;u<i.length;u++)s(i[u]);return s}({1:[function(r,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(i){function s(a){if(this._event=a,this._data=a.data,this.receivedTime=a.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=a.data[0]&240,this.channel=a.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=a.data[1]&127,this.velocity=a.data[2]&127;break;case 144:this.messageType="noteon",this.key=a.data[1]&127,this.velocity=a.data[2]&127;break;case 160:this.messageType="keypressure",this.key=a.data[1]&127,this.pressure=a.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=a.data[1]&127,this.controllerValue=a.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=a.data[1];break;case 208:this.messageType="channelpressure",this.pressure=a.data[1]&127;break;case 224:this.messageType="pitchbendchange";var u=a.data[2]&127,c=a.data[1]&127;this.pitchBend=(u<<8)+c;break}}return new s(i)},n.exports=o.default},{}]},{},[1])(1)})})(ke);var Dt=ke.exports,qt=Dt,Kt=function(e){return e.listenToMidi=function(t,r){var n={},o=r||{},i=o.gain||function(s){return s/127};return t.onmidimessage=function(s){var a=s.messageType?s:qt(s);if(a.messageType==="noteon"&&a.velocity===0&&(a.messageType="noteoff"),!(o.channel&&a.channel!==o.channel))switch(a.messageType){case"noteon":n[a.key]=e.play(a.key,0,{gain:i(a.velocity)});break;case"noteoff":n[a.key]&&(n[a.key].stop(),delete n[a.key]);break}},e},e};(function(e){var t=Nt,r=_t,n=It,o=Ct,i=Kt;function s(a,u,c){return i(o(n(r(t(a,u,c)))))}e.exports&&(e.exports=s),typeof window<"u"&&(window.SamplePlayer=s)})(xe);var $t=xe.exports;function ge(e,t){return Array(t+1).join(e)}function oe(e){return typeof e=="number"}function Lt(e){return typeof e=="string"}function Ft(e){return typeof e<"u"}function Ce(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var De=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function Ut(){return De}var Bt=[0,2,4,5,7,9,11];function x(e,t,r){if(typeof e!="string")return null;var n=De.exec(e);if(!n||!t&&n[4])return null;var o={letter:n[1].toUpperCase(),acc:n[2].replace(/x/g,"##")};o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt=o.acc[0]==="b"?-o.acc.length:o.acc.length;var i=Bt[o.step]+o.alt;return o.chroma=i<0?12+i:i%12,n[3]&&(o.oct=+n[3],o.midi=i+12*(o.oct+1),o.freq=Ce(o.midi,r)),t&&(o.tonicOf=n[4]),o}var Gt="CDEFGAB";function Ht(e){return oe(e)?e<0?ge("b",-e):ge("#",e):""}function Vt(e){return oe(e)?""+e:""}function qe(e,t,r){return e===null||typeof e>"u"?null:e.step?qe(e.step,e.alt,e.oct):e<0||e>6?null:Gt.charAt(e)+Ht(t)+Vt(r)}function Ke(e){if((oe(e)||Lt(e))&&e>=0&&e<128)return+e;var t=x(e);return t&&Ft(t.midi)?t.midi:null}function Wt(e,t){var r=Ke(e);return r===null?null:Ce(r,t)}function Jt(e){return(x(e)||{}).letter}function Xt(e){return(x(e)||{}).acc}function zt(e){return(x(e)||{}).pc}function Yt(e){return(x(e)||{}).step}function Zt(e){return(x(e)||{}).alt}function Qt(e){return(x(e)||{}).chroma}function en(e){return(x(e)||{}).oct}const tn=Object.freeze(Object.defineProperty({__proto__:null,acc:Xt,alt:Zt,build:qe,chroma:Qt,freq:Wt,letter:Jt,midi:Ke,oct:en,parse:x,pc:zt,regex:Ut,step:Yt},Symbol.toStringTag,{value:"Module"})),nn=Ze(tn);var Z,be;function rn(){if(be)return Z;be=1;var e=nn;function t(o,i){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof t))return new t(o);this.nameToUrl=i||t.nameToUrl,this.ctx=o,this.instruments={},this.promises=[]}t.prototype.onready=function(o){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(o)},t.prototype.instrument=function(o,i){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var s=this.ctx;if(o=o||"default",o in this.instruments)return this.instruments[o];var a={name:o,play:n(s,i)};if(this.instruments[o]=a,o!=="default"){var u=t.instrument(s,o,i).then(function(c){return a.play=c.play,a});this.promises.push(u),a.onready=function(c){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),u.then(c)}}else a.onready=function(c){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),c()};return a};function r(o,i,s){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),t.instrument(o,i,s).then(function(a){return a.buffers})}t.loadBuffers=r;function n(o,i){return i=i||{},function(s,a,u,c){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var h=s>0&&s<129?+s:e.midi(s),p=h?e.midiToFreq(h,440):null;if(p){u=u||.2,c=c||{};var f=c.destination||i.destination||o.destination,b=c.vcoType||i.vcoType||"sine",m=c.gain||i.gain||.4,d=o.createOscillator();d.type=b,d.frequency.value=p;var y=o.createGain();return y.gain.value=m,d.connect(y),y.connect(f),d.start(a),u>0&&d.stop(a+u),d}}}return t.noteToMidi=e.midi,Z=t,Z}(function(e){var t=at,r=$t;function n(a,u,c){if(arguments.length===1)return function(m,d){return n(a,m,d)};var h=c||{},p=h.isSoundfontURL||o,f=h.nameToUrl||i,b=p(u)?u:f(u,h.soundfont,h.format);return t(a,b,{only:h.only||h.notes}).then(function(m){var d=r(a,m,h).connect(h.destination?h.destination:a.destination);return d.url=b,d.name=u,d})}function o(a){return/\.js(\?.*)?$/i.test(a)}function i(a,u,c){return c=c==="ogg"?c:"mp3",u=u==="FluidR3_GM"?u:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+u+"/"+a+"-"+c+".js"}var s=rn();s.instrument=n,s.nameToUrl=i,e.exports&&(e.exports=s),typeof window<"u"&&(window.Soundfont=s)})(Ee);var on=Ee.exports;const $e=B(on);function an({setHighlightedNote:e}){const[t,r]=E.useState(null),[n,o]=E.useState(null),[i,s]=E.useState(!1),a=["C3","C#3","D3","D#3","E3","F3","F#3","G3","G#3","A3","A#3","B3"];E.useEffect(()=>{$e.instrument(new AudioContext,"acoustic_grand_piano").then(o)},[]);const u=()=>{const h=a[Math.floor(Math.random()*a.length)];r(h),e(h),s(!1),n&&n.play(h)},c=()=>{s(!0)};return S.jsxs("div",{children:[S.jsx("div",{className:"flex-center flex-wrap gap-4 pt-6 pb-3",children:S.jsx("button",{className:"button-85",onClick:u,children:"Play Random Note"})}),t&&!i&&S.jsx("p",{onClick:c,children:"Played Note: ██"}),i&&S.jsxs("p",{children:["Played Note: ",t]})]})}var sn=un;function un(e,t,r){if(e!=null&&typeof e!="number")throw new Error("start must be a number or null");if(t!=null&&typeof t!="number")throw new Error("stop must be a number or null");if(r!=null&&typeof r!="number")throw new Error("step must be a number or null");t==null&&(t=e||0,e=0),r==null&&(r=t>e?1:-1);for(var n=[],o=e<t;o?e<t:e>t;e+=r)n.push(e);return n}const ie=B(sn);var Le={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var i="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(i=o(i,n(a)))}return i}function n(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return r.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var a in i)t.call(i,a)&&i[a]&&(s=o(s,a));return s}function o(i,s){return s?i?i+" "+s:i+s:i}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Le);var cn=Le.exports;const ae=B(cn);var ln=200,se="__lodash_hash_undefined__",fn=9007199254740991,dn="[object Arguments]",pn="[object Function]",hn="[object GeneratorFunction]",vn=/[\\^$.*+?()[\]{}|]/g,mn=/^\[object .+?Constructor\]$/,yn=typeof $=="object"&&$&&$.Object===Object&&$,gn=typeof self=="object"&&self&&self.Object===Object&&self,ue=yn||gn||Function("return this")();function bn(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Nn(e,t){var r=e?e.length:0;return!!r&&Sn(e,t,0)>-1}function _n(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function An(e,t,r,n){for(var o=e.length,i=r+-1;++i<o;)if(t(e[i],i,e))return i;return-1}function Sn(e,t,r){if(t!==t)return An(e,wn,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function wn(e){return e!==e}function Tn(e,t){return e.has(t)}function Pn(e,t){return e==null?void 0:e[t]}function En(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}var Rn=Array.prototype,xn=Function.prototype,ce=Object.prototype,Q=ue["__core-js_shared__"],Ne=function(){var e=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=xn.toString,G=ce.hasOwnProperty,Ue=ce.toString,In=RegExp("^"+Fe.call(G).replace(vn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=ue.Symbol,Mn=ce.propertyIsEnumerable,jn=Rn.splice,Ae=_e?_e.isConcatSpreadable:void 0,Se=Math.max,On=Be(ue,"Map"),K=Be(Object,"create");function j(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function kn(){this.__data__=K?K(null):{}}function Cn(e){return this.has(e)&&delete this.__data__[e]}function Dn(e){var t=this.__data__;if(K){var r=t[e];return r===se?void 0:r}return G.call(t,e)?t[e]:void 0}function qn(e){var t=this.__data__;return K?t[e]!==void 0:G.call(t,e)}function Kn(e,t){var r=this.__data__;return r[e]=K&&t===void 0?se:t,this}j.prototype.clear=kn;j.prototype.delete=Cn;j.prototype.get=Dn;j.prototype.has=qn;j.prototype.set=Kn;function D(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $n(){this.__data__=[]}function Ln(e){var t=this.__data__,r=H(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():jn.call(t,r,1),!0}function Fn(e){var t=this.__data__,r=H(t,e);return r<0?void 0:t[r][1]}function Un(e){return H(this.__data__,e)>-1}function Bn(e,t){var r=this.__data__,n=H(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}D.prototype.clear=$n;D.prototype.delete=Ln;D.prototype.get=Fn;D.prototype.has=Un;D.prototype.set=Bn;function q(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Gn(){this.__data__={hash:new j,map:new(On||D),string:new j}}function Hn(e){return V(this,e).delete(e)}function Vn(e){return V(this,e).get(e)}function Wn(e){return V(this,e).has(e)}function Jn(e,t){return V(this,e).set(e,t),this}q.prototype.clear=Gn;q.prototype.delete=Hn;q.prototype.get=Vn;q.prototype.has=Wn;q.prototype.set=Jn;function F(e){var t=-1,r=e?e.length:0;for(this.__data__=new q;++t<r;)this.add(e[t])}function Xn(e){return this.__data__.set(e,se),this}function zn(e){return this.__data__.has(e)}F.prototype.add=F.prototype.push=Xn;F.prototype.has=zn;function H(e,t){for(var r=e.length;r--;)if(ar(e[r][0],t))return r;return-1}function Yn(e,t,r,n){var o=-1,i=Nn,s=!0,a=e.length,u=[],c=t.length;if(!a)return u;t.length>=ln&&(i=Tn,s=!1,t=new F(t));e:for(;++o<a;){var h=e[o],p=h;if(h=h!==0?h:0,s&&p===p){for(var f=c;f--;)if(t[f]===p)continue e;u.push(h)}else i(t,p,n)||u.push(h)}return u}function Zn(e,t,r,n,o){var i=-1,s=e.length;for(r||(r=tr),o||(o=[]);++i<s;){var a=e[i];r(a)&&_n(o,a)}return o}function Qn(e){if(!He(e)||rr(e))return!1;var t=Ge(e)||En(e)?In:mn;return t.test(or(e))}function er(e,t){return t=Se(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,o=Se(r.length-t,0),i=Array(o);++n<o;)i[n]=r[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=r[n];return s[t]=i,bn(e,this,s)}}function V(e,t){var r=e.__data__;return nr(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Be(e,t){var r=Pn(e,t);return Qn(r)?r:void 0}function tr(e){return ur(e)||sr(e)||!!(Ae&&e&&e[Ae])}function nr(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function rr(e){return!!Ne&&Ne in e}function or(e){if(e!=null){try{return Fe.call(e)}catch{}try{return e+""}catch{}}return""}var ir=er(function(e,t){return ee(e)?Yn(e,Zn(t,1,ee)):[]});function ar(e,t){return e===t||e!==e&&t!==t}function sr(e){return ee(e)&&G.call(e,"callee")&&(!Mn.call(e,"callee")||Ue.call(e)==dn)}var ur=Array.isArray;function cr(e){return e!=null&&lr(e.length)&&!Ge(e)}function ee(e){return fr(e)&&cr(e)}function Ge(e){var t=He(e)?Ue.call(e):"";return t==pn||t==hn}function lr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fn}function He(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function fr(e){return!!e&&typeof e=="object"}var dr=ir;const we=B(dr);function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,t,r){return t&&pr(e.prototype,t),e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(){return te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(this,arguments)}function X(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},C(e)}function ne(e,t){return ne=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},ne(e,t)}function hr(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function vr(e,t){if(e==null)return{};var r=hr(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function w(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:w(e)}function mr(e,t){return yr(e)||gr(e,t)||br()}function yr(e){if(Array.isArray(e))return e}function gr(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(u){o=!0,i=u}finally{try{!n&&s.return!=null&&s.return()}finally{if(o)throw i}}return r}function br(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var Nr=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],_r=["Db","Eb","Gb","Ab","Bb"],Ar={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},U=12,le=U,fe=127,Sr=/([a-g])([#b]?)(\d+)/,re=12;function wr(e){if(!e)throw Error("Invalid note argument");var t=Sr.exec(e.toLowerCase());if(!t)throw Error("Invalid note argument");var r=mr(t,4),n=r[1],o=r[2],i=r[3],s="".concat(n.toUpperCase()).concat(o),a=Ar[s];if(a==null)throw Error("Invalid note argument");return U+a+re*parseInt(i,10)}function Tr(e){var t=(e-U)%re,r=Math.floor((e-U)/re),n=Nr[t];return{note:"".concat(n).concat(r),pitchName:n,octave:r,midiNumber:e,isAccidental:_r.includes(n)}}function Pr(){return ie(le,fe+1).reduce(function(e,t){return e[t]=Tr(t),e},{})}var Er=Pr();function Ve(e){var t=Er[e];if(!t)throw Error("Invalid MIDI number");return t}var Rr=ie(le,fe+1).filter(function(e){return!Ve(e).isAccidental}),R={fromNote:wr,getAttributes:Ve,MIN_MIDI_NUMBER:le,MAX_MIDI_NUMBER:fe,NATURAL_MIDI_NUMBERS:Rr},de=function(e){X(t,e);function t(){var r,n;W(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=z(this,(r=C(t)).call.apply(r,[this].concat(i))),N(w(n),"onPlayNoteInput",function(){n.props.onPlayNoteInput(n.props.midiNumber)}),N(w(n),"onStopNoteInput",function(){n.props.onStopNoteInput(n.props.midiNumber)}),n}return J(t,[{key:"getAbsoluteKeyPosition",value:function(n){var o=7,i=R.getAttributes(n),s=i.octave,a=i.pitchName,u=this.props.pitchPositions[a],c=o*s;return u+c}},{key:"getRelativeKeyPosition",value:function(n){return this.getAbsoluteKeyPosition(n)-this.getAbsoluteKeyPosition(this.props.noteRange.first)}},{key:"render",value:function(){var n=this.props,o=n.naturalKeyWidth,i=n.accidentalWidthRatio,s=n.midiNumber,a=n.gliss,u=n.useTouchEvents,c=n.accidental,h=n.active,p=n.disabled,f=n.children;return P.createElement("div",{className:ae("ReactPiano__Key",{"ReactPiano__Key--accidental":c,"ReactPiano__Key--natural":!c,"ReactPiano__Key--disabled":p,"ReactPiano__Key--active":h}),style:{left:Te(this.getRelativeKeyPosition(s)*o),width:Te(c?i*o:o)},onMouseDown:u?null:this.onPlayNoteInput,onMouseUp:u?null:this.onStopNoteInput,onMouseEnter:a?this.onPlayNoteInput:null,onMouseLeave:this.onStopNoteInput,onTouchStart:u?this.onPlayNoteInput:null,onTouchCancel:u?this.onStopNoteInput:null,onTouchEnd:u?this.onStopNoteInput:null},P.createElement("div",{className:"ReactPiano__NoteLabelContainer"},f))}}]),t}(P.Component);N(de,"propTypes",{midiNumber:l.number.isRequired,naturalKeyWidth:l.number.isRequired,gliss:l.bool.isRequired,useTouchEvents:l.bool.isRequired,accidental:l.bool.isRequired,active:l.bool.isRequired,disabled:l.bool.isRequired,onPlayNoteInput:l.func.isRequired,onStopNoteInput:l.func.isRequired,accidentalWidthRatio:l.number.isRequired,pitchPositions:l.object.isRequired,children:l.node});N(de,"defaultProps",{accidentalWidthRatio:.65,pitchPositions:{C:0,Db:.55,D:1,Eb:1.8,E:2,F:3,Gb:3.5,G:4,Ab:4.7,A:5,Bb:5.85,B:6}});function Te(e){return"".concat(e*100,"%")}var pe=function(e){X(t,e);function t(){return W(this,t),z(this,C(t).apply(this,arguments))}return J(t,[{key:"getMidiNumbers",value:function(){return ie(this.props.noteRange.first,this.props.noteRange.last+1)}},{key:"getNaturalKeyCount",value:function(){return this.getMidiNumbers().filter(function(n){var o=R.getAttributes(n),i=o.isAccidental;return!i}).length}},{key:"getNaturalKeyWidth",value:function(){return 1/this.getNaturalKeyCount()}},{key:"getWidth",value:function(){return this.props.width?this.props.width:"100%"}},{key:"getHeight",value:function(){if(!this.props.width)return"100%";var n=this.props.width*this.getNaturalKeyWidth();return"".concat(n/this.props.keyWidthToHeight,"px")}},{key:"render",value:function(){var n=this,o=this.getNaturalKeyWidth();return P.createElement("div",{className:ae("ReactPiano__Keyboard",this.props.className),style:{width:this.getWidth(),height:this.getHeight()}},this.getMidiNumbers().map(function(i){var s=R.getAttributes(i);s.note;var a=s.isAccidental,u=!n.props.disabled&&n.props.activeNotes.includes(i);return P.createElement(de,{naturalKeyWidth:o,midiNumber:i,noteRange:n.props.noteRange,active:u,accidental:a,disabled:n.props.disabled,onPlayNoteInput:n.props.onPlayNoteInput,onStopNoteInput:n.props.onStopNoteInput,gliss:n.props.gliss,useTouchEvents:n.props.useTouchEvents,key:i},n.props.disabled?null:n.props.renderNoteLabel({isActive:u,isAccidental:a,midiNumber:i}))}))}}]),t}(P.Component);N(pe,"propTypes",{noteRange:xr,activeNotes:l.arrayOf(l.number),onPlayNoteInput:l.func.isRequired,onStopNoteInput:l.func.isRequired,renderNoteLabel:l.func.isRequired,keyWidthToHeight:l.number.isRequired,className:l.string,disabled:l.bool,gliss:l.bool,useTouchEvents:l.bool,width:l.number});N(pe,"defaultProps",{disabled:!1,gliss:!1,useTouchEvents:!1,keyWidthToHeight:.33,renderNoteLabel:function(){}});function Pe(e){return typeof e!="number"?!1:R.NATURAL_MIDI_NUMBERS.includes(e)}function xr(e,t,r){var n=e[t],o=n.first,i=n.last;if(!o||!i)return new Error("Invalid prop ".concat(t," supplied to ").concat(r,". ").concat(t," must be an object with .first and .last values."));if(!Pe(o)||!Pe(i))return new Error("Invalid prop ".concat(t," supplied to ").concat(r,". ").concat(t," values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes)."));if(o>=i)return new Error("Invalid prop ".concat(t," supplied to ").concat(r,". ").concat(t,".first must be smaller than ").concat(t,".last."))}var he=function(e){X(t,e);function t(){var r,n;W(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=z(this,(r=C(t)).call.apply(r,[this].concat(i))),N(w(n),"state",{isMouseDown:!1,useTouchEvents:!1}),N(w(n),"handleNoteChanges",function(a){var u=a.prevActiveNotes,c=a.nextActiveNotes;if(!n.props.disabled){var h=we(u,c),p=we(c,u);p.forEach(function(f){n.props.playNote(f)}),h.forEach(function(f){n.props.stopNote(f)})}}),N(w(n),"getMidiNumberForKey",function(a){if(!n.props.keyboardShortcuts)return null;var u=n.props.keyboardShortcuts.find(function(c){return c.key===a});return u&&u.midiNumber}),N(w(n),"getKeyForMidiNumber",function(a){if(!n.props.keyboardShortcuts)return null;var u=n.props.keyboardShortcuts.find(function(c){return c.midiNumber===a});return u&&u.key}),N(w(n),"onKeyDown",function(a){if(!(a.ctrlKey||a.metaKey||a.shiftKey)){var u=n.getMidiNumberForKey(a.key);u&&n.onPlayNoteInput(u)}}),N(w(n),"onKeyUp",function(a){var u=n.getMidiNumberForKey(a.key);u&&n.onStopNoteInput(u)}),N(w(n),"onPlayNoteInput",function(a){n.props.disabled||n.props.onPlayNoteInput(a,n.props.activeNotes)}),N(w(n),"onStopNoteInput",function(a){n.props.disabled||n.props.onStopNoteInput(a,n.props.activeNotes)}),N(w(n),"onMouseDown",function(){n.setState({isMouseDown:!0})}),N(w(n),"onMouseUp",function(){n.setState({isMouseDown:!1})}),N(w(n),"onTouchStart",function(){n.setState({useTouchEvents:!0})}),N(w(n),"renderNoteLabel",function(a){var u=a.midiNumber,c=a.isActive,h=a.isAccidental,p=n.getKeyForMidiNumber(u);return n.props.renderNoteLabel({keyboardShortcut:p,midiNumber:u,isActive:c,isAccidental:h})}),n}return J(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"componentDidUpdate",value:function(n,o){this.props.activeNotes!==n.activeNotes&&this.handleNoteChanges({prevActiveNotes:n.activeNotes||[],nextActiveNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){return P.createElement("div",{style:{width:"100%",height:"100%"},onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchStart:this.onTouchStart,"data-testid":"container"},P.createElement(pe,{noteRange:this.props.noteRange,onPlayNoteInput:this.onPlayNoteInput,onStopNoteInput:this.onStopNoteInput,activeNotes:this.props.activeNotes,className:this.props.className,disabled:this.props.disabled,width:this.props.width,keyWidthToHeight:this.props.keyWidthToHeight,gliss:this.state.isMouseDown,useTouchEvents:this.state.useTouchEvents,renderNoteLabel:this.renderNoteLabel}))}}]),t}(P.Component);N(he,"propTypes",{noteRange:l.object.isRequired,activeNotes:l.arrayOf(l.number.isRequired).isRequired,playNote:l.func.isRequired,stopNote:l.func.isRequired,onPlayNoteInput:l.func.isRequired,onStopNoteInput:l.func.isRequired,renderNoteLabel:l.func.isRequired,className:l.string,disabled:l.bool,width:l.number,keyWidthToHeight:l.number,keyboardShortcuts:l.arrayOf(l.shape({key:l.string.isRequired,midiNumber:l.number.isRequired}))});N(he,"defaultProps",{renderNoteLabel:function(t){var r=t.keyboardShortcut;t.midiNumber;var n=t.isActive,o=t.isAccidental;return r?P.createElement("div",{className:ae("ReactPiano__NoteLabel",{"ReactPiano__NoteLabel--active":n,"ReactPiano__NoteLabel--accidental":o,"ReactPiano__NoteLabel--natural":!o})},r):null}});var We=function(e){X(t,e);function t(){var r,n;W(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=z(this,(r=C(t)).call.apply(r,[this].concat(i))),N(w(n),"state",{activeNotes:n.props.activeNotes||[]}),N(w(n),"handlePlayNoteInput",function(a){n.setState(function(u){return n.props.onPlayNoteInput&&n.props.onPlayNoteInput(a,{prevActiveNotes:u.activeNotes}),u.activeNotes.includes(a)?null:{activeNotes:u.activeNotes.concat(a)}})}),N(w(n),"handleStopNoteInput",function(a){n.setState(function(u){return n.props.onStopNoteInput&&n.props.onStopNoteInput(a,{prevActiveNotes:n.state.activeNotes}),{activeNotes:u.activeNotes.filter(function(c){return a!==c})}})}),n}return J(t,[{key:"componentDidUpdate",value:function(n){n.activeNotes!==this.props.activeNotes&&this.state.activeNotes!==this.props.activeNotes&&this.setState({activeNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){var n=this.props;n.activeNotes,n.onPlayNoteInput,n.onStopNoteInput;var o=vr(n,["activeNotes","onPlayNoteInput","onStopNoteInput"]);return P.createElement(he,te({activeNotes:this.state.activeNotes,onPlayNoteInput:this.handlePlayNoteInput,onStopNoteInput:this.handleStopNoteInput},o))}}]),t}(P.Component);N(We,"propTypes",{noteRange:l.object.isRequired,activeNotes:l.arrayOf(l.number.isRequired),playNote:l.func.isRequired,stopNote:l.func.isRequired,onPlayNoteInput:l.func,onStopNoteInput:l.func,renderNoteLabel:l.func,className:l.string,disabled:l.bool,width:l.number,keyWidthToHeight:l.number,keyboardShortcuts:l.arrayOf(l.shape({key:l.string.isRequired,midiNumber:l.number.isRequired}))});const Ir=({highlightedNote:e})=>{const[t,r]=E.useState(null),[n,o]=E.useState(null),[i,s]=E.useState([]),a=R.fromNote("c3"),u=R.fromNote("f5");E.useEffect(()=>{const d=new(window.AudioContext||window.webkitAudioContext);return r(d),$e.instrument(d,"acoustic_grand_piano").then(y=>{o(y)}),()=>{t&&t.close()}},[]);const c=d=>{if(n){const y=R.getAttributes(d).note;n.play(y),s(T=>[...T,y].slice(-8))}},h=d=>{n&&n.stop()},p=d=>{if(!e)return!1;const y=b(d),T=b(e);return y===T},f={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#"},b=d=>{const y=d.slice(0,-1),T=d.slice(-1);return`${f[y]||y}${T}`},m=d=>{const y=["C#","D#","F#","G#","A#"],T=d.slice(0,-1);return y.includes(T)};return S.jsxs("div",{children:[S.jsx(We,{noteRange:{first:a,last:u},playNote:c,stopNote:h,width:1e3,renderNoteLabel:({midiNumber:d})=>{const y=R.getAttributes(d).note,T=b(y),I=p(y),Y=m(T);return S.jsx("span",{className:`piano-note-label ${I?"highlighted":""} ${Y?"sharp-note":"non-sharp-note"}`,children:T})},renderKey:({midiNumber:d})=>{const y=R.getAttributes(d).note,T=p(y),I=m(y);return S.jsx("div",{className:`piano-key ${T?"highlighted":""} ${I?"sharp-key":"non-sharp-key"}`},d)}}),S.jsxs("div",{children:[S.jsx("h3",{className:"mt-5",children:"Notes Played:"}),S.jsx("p",{children:i.map((d,y)=>S.jsxs("span",{style:{color:y<i.length-1?"gray":"white"},children:[b(d),y<i.length-1&&", "]},y))})]})]})};function kr(){const[e,t]=E.useState(null),[r,n]=E.useState(!1),o=Qe(),i=()=>{n(!0)};return S.jsxs("div",{className:"text-center",children:[S.jsx("nav",{className:"mt-10 mr-10 text-2xl flex justify-end",children:S.jsx("a",{className:"navLink",onClick:()=>o("/tools"),children:S.jsx(et,{icon:tt.faHome,style:{fontSize:"30px"}})})}),S.jsx(an,{setHighlightedNote:t}),S.jsx("button",{className:"button-89 mb-5",onClick:i,children:"Send Note to Keyboard"}),S.jsx(Ir,{highlightedNote:r?e:null})]})}export{kr as default};
